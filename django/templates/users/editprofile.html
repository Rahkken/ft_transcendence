{% extends 'home.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}
	Editing Profile
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'users/styles.css' %}">
{% endblock%}

{% block body %}
	<div>
		<h1 style="margin-bottom: 30px;">Edit Page</h1>
		<form id="2faToggleForm">
			{% csrf_token %}
			<button type="button" style="margin-bottom: 10px;" id="toggle2faButton" onclick="toggle2FA()">
				{% if status_2fa %}Disable 2FA{% else %}Enable 2FA{% endif %}
			</button>
			<p style="margin-bottom: 20px;" id="toggleMessage"></p>
		</form>
		<form hx-post="{% url 'users:profile_edit' %}" hx-encoding="multipart/form-data" hx-target="#app-body">
			{% csrf_token %}
			{{ u_form | crispy }}
			{{ p_form | crispy }}
			<button class="mt-3" style="display: inline-block;" type="submit">
				Update
			</button>	
		</form>
		<a href="/users/profile/{{ request.user.username }}/delete/">
			<button style="margin: 10px 0 0 0; padding: 5px 0;" class="btn_discrete text-danger">
				Delete your account
			</button>
		</a>
	</div>
	<script src="{% static 'js/2fa.js' %}"></script>
{% endblock %}

